package hasher

import (
	"encoding/base64"
	"testing"
)

func TestPHashHandler(t *testing.T) {
	image := "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Z5I0SvgDEqzKDgOhhYjC8A4RYw3rypUOOHGuFla8h/kmU2ufa8vuF5DJUJSQjVQ5ZEqSV6Z+eBL/sSRL0o2Jp9fE6D96PpfQn5FObteErNo0WbT185ZSF2p1JNklf+qr7XcizLigTXaxKiGX2C4j/AwnOSpxgJuk7MS/suWDZUi198nRK3ZPl+3lIEBeetSQiC7dqA1/xZQ/oKMWi2A+QUq3hMy6hmr4SqkSrWF+RMVPFdBGWII0jdj9UB1gHoScBb0f9UZB/gFL13L99ySA6vr0I13AAAAAQzzIsQBTF8k98soNj4rfKMVYiK5LMdjjDosLu6P6c0DJzn6wqREsEtvd2AAAAAAAHAnxvgrZ9S//5OkfVmYill/hAO0DbrLS/uFcdLMOoLLzXYbRqtYcKizDgl7iRvy0T5Qw+wVWJYOWoLjlIc716zm9z6CNm/why+mA+KoVkSJKVqE+esLDxJrcrqzELguMPeosrJ0GIL+czsR7Xldg5IPBS70lS7LVX+qEli7gS3q6I0MrMigAAABZbJEn/o5UX+v1QplXVEB3VjR2UO2vPR4X8n2al/aYXdzOFw/giMs+pz4vfCt3qVDhuRqsaXnBK1oUHYVYO84OYgfKkHTz+EHs8amtPTfwfAmqQ8ZP44HxXszqNsBYv4IZd2iNR5QGAUBQ2zAB+vWMNV4VB4tKITq/s2GLG3A4AkjmuuA3ABYE21iGR31xgKIkiwrMeawhiZV1ioJlXWKgmVdYqCZV1ioJlXWKgmVdYqCZV1ioJlXWKgmVdYqCaqasl7+yx+gu3hHL76+JPaAAA7U6RYmmwzqfkQAebh69wykNHTonIiApR772ZPjWZfezJ8azL72ZPjWZfezJ8azL72ZPjUAAAEVYSUaKAAAATU0AKgAAAAgABAEaAAUAAAABAAAAPgEbAAUAAAABAAAARgEoAAMAAAABAAIAAIdpAAQAAAABAAAATgAAAAAAAACQAAAAAQAAAJAAAAABAAOShgAHAAAAEgAAAHigAgAEAAAAAQAAAqigAwAEAAAAAQAAALYAAAAAQVNDSUkAAABTY3JlZW5zaG90WE1QIMABAAA8eDp4bXBtZXRhIHhtbG5zOng9ImFkb2JlOm5zOm1ldGEvIiB4OnhtcHRrPSJYTVAgQ29yZSA2LjAuMCI+CiAgIDxyZGY6UkRGIHhtbG5zOnJkZj0iaHR0cDovL3d3dy53My5vcmcvMTk5OS8wMi8yMi1yZGYtc3ludGF4LW5zIyI+CiAgICAgIDxyZGY6RGVzY3JpcHRpb24gcmRmOmFib3V0PSIiCiAgICAgICAgICAgIHhtbG5zOmV4aWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20vZXhpZi8xLjAvIj4KICAgICAgICAgPGV4aWY6UGl4ZWxZRGltZW5zaW9uPjE4MjwvZXhpZjpQaXhlbFlEaW1lbnNpb24+CiAgICAgICAgIDxleGlmOlBpeGVsWERpbWVuc2lvbj42ODA8L2V4aWY6UGl4ZWxYRGltZW5zaW9uPgogICAgICAgICA8ZXhpZjpVc2VyQ29tbWVudD5TY3JlZW5zaG90PC9leGlmOlVzZXJDb21tZW50PgogICAgICA8L3JkZjpEZXNjcmlwdGlvbj4KICAgPC9yZGY6UkRGPgo8L3g6eG1wbWV0YT4K"

	base64Text := make([]byte, base64.StdEncoding.DecodedLen(len(image)))
	_, err := base64.StdEncoding.Decode(base64Text, []byte(image))
	if err != nil {
		t.Errorf("PHashHandler.Hash() error = %v", err)
	}

	tests := []struct {
		name    string
		image   []byte
		wantErr bool
		want    string
	}{
		{
			name:    "should return error when image is invalid",
			image:   []byte("invalid"),
			wantErr: true,
		},
		{
			name:    "should return error when image is nil",
			image:   nil,
			wantErr: true,
		},
		{
			name:    "should return hash when image is valid",
			image:   base64Text,
			wantErr: false,
			want:    "p:d4858f6fff100079",
		},
	}

	for _, tt := range tests {
		t.Run(tt.name, func(t *testing.T) {
			handler := NewPHashHandler()
			got, err := handler.Hash(tt.image)
			if (err != nil) != tt.wantErr {
				t.Errorf("PHashHandler.Hash() error = %v, wantErr %v", err, tt.wantErr)
				return
			}

			if got == "" && !tt.wantErr {
				t.Errorf("PHashHandler.Hash() = %v, want %v", got, tt.want)
			}
		})
	}
}
